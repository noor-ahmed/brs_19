window.onInit = function(handler) {
  $(document).on("ready page:change", handler)
}
onInit(function() {
  $(document).ready(function() {
    $("#book_publish_date").datepicker({format: "dd/mm/yyyy"});
    $("#rating").raty({
      readOnly : true,
      starHalf: '<%= image_path("star-half.png") %>',
      starOn: '<%= image_path("star-on.png") %>',
      starOff: '<%= image_path("star-off.png") %>',
      score : function() {
        return $(this).attr("data-rating");
      }
    });

    $("#review_rating").raty({
      readOnly : true,
      starHalf: '<%= image_path('star-half.png') %>',
      starOn: '<%= image_path('star-on.png') %>',
      starOff: '<%= image_path('star-off.png') %>',
      score : function() {
        return $(this).attr("data-rating");
      }
    });

    $("#rating_for_review").raty({
      targetScore : "#rating_review",
      starHalf: '<%= image_path('star-half.png') %>',
      starOn: '<%= image_path('star-on.png') %>',
      starOff: '<%= image_path('star-off.png') %>',
    });

    $("#edit_rating_for_review").raty({
      targetScore : "#edit_rating_review",
      starHalf: '<%= image_path('star-half.png') %>',
      starOn: '<%= image_path('star-on.png') %>',
      starOff: '<%= image_path('star-off.png') %>',
      score : function() {
        return $(this).attr("data-rating");
      }
    });
  });
});